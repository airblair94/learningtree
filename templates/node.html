<!--
<script type="text/javascript">
	function display_markdown() {
		var rawContent = $("#node_raw").val();
		$("#node_saved").val(rawContent);
		var converter = Markdown.getSanitizingConverter();
		$("#nodecontent").html(converter.makeHtml(rawContent)).css("display","");
	}

	function saveContent() {
		var rawContent = $("#node_raw").val();
		$.ajax({type:"GET", url: "/edit_node/", data: { name: $("#node").attr("pid"), content: rawContent}}).done(function(msg) { alert(msg);});
		$("#node_raw").css("display","none");
		$("#edit_content").css("display","");
		$("#save_content").css("display","none");
		$("#cancel_edit").css("display","none");
		display_markdown();
	}
	function editContent() {
		$("#node_raw").css("display","");
		$("#nodecontent").css("display","none");
		$("#edit_content").css("display","none");
		$("#save_content").css("display","");
		$("#cancel_edit").css("display","");
	}
	function cancelEdit() {
		$("#node_raw").val($("#node_saved").val());
		$("#node_raw").css("display","none");
		$("#edit_content").css("display", "");
		$("#save_content").css("display", "none");
		$("#cancel_edit").css("display","none");
		display_markdown();
	}

	$(document).ready(function () {
		display_markdown();
		$("#edit_content").bind("click", editContent);
		$("#save_content").bind("click", saveContent);
		$("#cancel_edit").bind("click", cancelEdit);
	});

 </script>-->

<!--




-->

{% include "mainmenu.html" %}

{% if node %}
 <div id="node" pid="{{ node.id }}">
  <div id="node_name" class="smallSubHeader">{{ node.name }}</div>
  <div id="nodeContent">{{ node.content }}</div>
  <div id="nodeSideTools">
   <div class="cancelButton">
    <img title="Cancel" class="button" src="http://icons.iconarchive.com/icons/custom-icon-design/office/256/edit-icon.png" />
   </div>
   <div class="editButton">
    <img title="Edit" class="button" src="http://icons.iconarchive.com/icons/custom-icon-design/office/256/edit-icon.png" />
   </div>
   <div class="upvoteButton" pid="{{node.id}}" model="node">
    <img title="Upvote" class="button" src="{{STATIC_URL}}images/upvote.png" />
   </div>
   <div id="nodeStats">{{rating}}</div>
   <div class="downvoteButton button" pid="{{node.id}}" model="node">
    <img title="Downvote" class="button" src="{{STATIC_URL}}images/downvote.png" />
   </div>
  </div>
  <div class="container"></div>
<script>

$(document).ready(function () {
 loadGraph({{ node.id}});
});


</script>

 </div>
{% else %}
 <div class="errorlist">Node not found!</div>
{% endif %}

